(require lispy.macros *)

(= n (* 2 (** 10 6)))

(def is-prime? [n all-p-below]
  (for p all-p-below
    (cond (> (* p p) n) (break)
          (== 0 (% n p)) (return False)))
  (return True))

(def build-primes [n]
  (= primes [2])
  (= i 3)
  (while (< i n)
    (if (is-prime? i primes)
        (primes.append i))
    (+= i 2))
  (return primes))

(print (sum (build-primes n)))
